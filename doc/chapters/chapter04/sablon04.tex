% Szglab4
% ===========================================================================
%
\chapter{Analízis modell kidolgozása 2}

\thispagestyle{fancy}

\section{Objektum katalógus}

\subsection{\bf Simulation}
%Szimuláció objektum. A szimulációért felelős. Elindítja a jelgenerátor léptetőt, s utasítja az áramkört %több kiértékelési ciklus lefuttatásához, amíg az áramkörben van változás. Ha a változás megadott lépésen %belül nem áll meg, tájékoztatja a felhasználót, hogy nincs stacionárius állapot. Amikor leállítódik, a %jelgenerátor-léptetőt is leállítja.
A szimulációért felelős objektum. Létrehozza a szimulálni kívánt ármakört. Utasítja az áramkört több kiértékelési ciklus lefuttatásához, amíg az áramkörben van változás. Ha a változás megadott lépés szám limiten belül nem áll meg, tájékoztatja a felhasználót, hogy nincs stacionárius állapot.

\subsection{\bf State}
A szimuláció állapotát megvalósító objektum. 3 állapota van: WORKING, READY, FAILED

\subsection{\bf Circuit}
%Az áramkör objektum. Ezen objektum feladata a jelgenerátor léptető kérésére a jelgenerátorok léptetése, %az áramkörben található komponensek utasítása arra, hogy töröljék a "már kiértékelve" flaget egy adott %kiértékelési ciklus előtt, hogy ezáltal a ciklusban minden kimenet értéke frissülhessen.
%Továbbá feladata a kiértékelés elindítása az összes kijelzőre, mert a rendszer kiértékelése a kijelzők %kiértékelésével kezdődik.
Az áramkör objektum. Ez az objektum hozza létre és köti össze egymással az áramköri elemeket. Törli az egyes elemek "már kiértékelt" flagjét a kiértékelési ciklus előtt, hogy ezáltal a ciklusban minden kimenet értéke frissülhessen. További feladata a kiértékelés elindítása az összes kijelzőre, mert a rendszer kiértékelése a kijelzők kiértékelésével kezdődik. A flip-flopokat utasítja arra, hogy mentsék el a jelenlegi kimenetüket, a saját belső memóriájukba. Megmondja, hogy az áramköri elemek értéke megváltoztak-e. Ezen kívül lépteti a jelgenerátorokat.

\subsection{\bf SequenceGenerator}
Jelgenerátor, az áramkört felépítő egyik alapelem, kiértékelési kezdeményezés hatására az előre betáplált jelsorozatot soron következő elemét állítja be aktuális értékként, így azon komponensek melyek bemenetére a Jelgenerátor van kötve, elérik aktuális értékét. Bemenete nem komponens jellegű így nem kezel más komponenseket. Mikor az áramkör kéri tőle, hogy lépjen, akkor a bitsorozat következő elemére lép.

\subsection{\bf Value}
A logikai értékeket megvalósító objektum. Jelenleg két érték lehetséges: logikai igaz, logikai hamis.

\subsection{\bf AndGate}
ÉS kapu, az áramkör egyik alapeleme. Bemeneteire kötött komponensek kiértékelését kezdeményezi, s a kapott értékek logikai ÉS kapcsolatát valósítja meg, amit a kimenetén kiad.

\subsection{\bf OrGate}
VAGY kapu, az áramkör egyik alapeleme. Bemeneteire kötött komponensek kiértékelését kezdeményezi, s a kapott értékek logikai VAGY kapcsolatát valósítja meg, amit a kimenetén kiad.

\subsection{\bf Inverter}
Invertáló, az áramkör alapelemei közé tartozik. A bemenetére érkező jel logikai negáltját valósítja meg, amit a kimenetén kiad.

\subsection{\bf Gnd}
Föld, az áramkört felépítő egyik elem, állandó értéke logikai hamis. Bemenete nem létezik, így nem kezdeményez további kiértékeléseket.

\subsection{\bf Vcc}
Tápfeszültség, az áramkör egyik alapeleme, mely állandóan a logikai igazt adja ki a kimenetén.

\subsection{\bf Led}
Egy kijelző az áramkör alapeleme, bemenetére kötött komponens kiértékelését kezdeményezi, és ezáltal az aktuális értékét egy a felhasználó számára érzékelhető módon kijelzi.

\subsection{\bf Toggle}
Kapcsoló, az áramkört felépítő elem, felhasználói interakciót követően, az aktuális értékét lehet állítani. Komponens bemenete nincs, így nem kezel további komponenseket.

\subsection{\bf Value}
A logikai értékeket megvalósító objektum. Jelenleg két érték lehetséges: logikai igaz, logikai hamis.

\subsection{\bf FlipFlopD}
D flip flopot megvalósító objektum. Csak akkor lép működésbe, mikor az órajelbemenetén a logikai érték hamisról igazra változik, ekkor az értékbemenettől függően változtatja a kimeneti értékét.

\subsection{\bf FlipFlopJK}
JK flip flopot megvalósító objektum. Csak akkor lép működésbe, mikor az órajelbemenetén a logikai érték hamisról igazra változik, ekkor az értékbemenetektől függően változtatja a kimeneti értékét.

\subsection{\bf Mpx}
4-1-es multiplexer áramköri építőelemet megvalósító objektum. Bemeneteire kötött komponensek kiértékelését kezdeményezi, a választó bemenet függvényében adja ki a kimeneten az egyik, vagy másik értékbemenetére kötött értéket.

\subsection{\bf SevenSegmentDisplay}
Hétszegmenses kijelző objektuma. Minden bemenete egy-egy szegmensért felelős, melyek 8-as alakban helyezkednek el.

\section{Osztályok leírása}

\input{chapters/chapter04/javadoc/hu.override.logsim}
\input{chapters/chapter04/javadoc/hu.override.logsim.component}
\input{chapters/chapter04/javadoc/hu.override.logsim.component.impl}
%\input{chapters/chapter04/javadoc/hu.override.logsim.parser}

\section{Statikus struktúra diagramok}

\begin{figure}[H]
\begin{center}
\includegraphics*[angle=90, width=17cm, viewport = 30 30 745 565]{chapters/chapter04/classdiagram/class.pdf}
\caption{Statikus struktúra nézet}
\label{fig:class_diagram}
\end{center}
\end{figure}
%
%\begin{figure}[H]
%\begin{center}
%\includegraphics*[angle=90, width=14cm, viewport = 765 475 1530 930]{chapters/chapter03/classdiagram/class_diagram.pdf}
%\caption{Statikus struktúra nézet (jobb felső)}
%\label{fig:class_diagram}
%\end{center}
%\end{figure}
%
%\begin{figure}[H]
%\begin{center}
%\includegraphics*[angle=90, width=14cm, viewport = 0 0 765 475]{chapters/chapter03/classdiagram/class_diagram.pdf}
%\caption{Statikus struktúra nézet (bal alsó)}
%\label{fig:class_diagram}
%\end{center}
%\end{figure}
%
%\begin{figure}[H]
%\begin{center}
%\includegraphics*[angle=90, width=14cm, viewport = 765 0 1530 475]{chapters/chapter03/classdiagram/class_diagram.pdf}
%\caption{Statikus struktúra nézet (jobb alsó)}
%\label{fig:class_diagram}
%\end{center}
%\end{figure}

\section{Szekvencia diagramok}

\begin{figure}[H]
\begin{center}
\includegraphics{chapters/chapter04/seqdiagrams/new/init.pdf}
\caption{Inicializálás}
\label{fig:init}
\end{center}
\end{figure}

\begin{figure}[H]
\begin{center}
\includegraphics{chapters/chapter04/seqdiagrams/new/simulation.pdf}
\caption{Szimuláció}
\label{fig:simulation}
\end{center}
\end{figure}

%\begin{figure}[H]
%\begin{center}
%\includegraphics{chapters/chapter04/seqdiagrams/clear_changed_flags.pdf}
%\caption{"Changed" flag-ek törlése}
%\label{fig:clear_changed_flags}
%\end{center}
%\end{figure}

\begin{figure}[H]
\begin{center}
\includegraphics{chapters/chapter04/seqdiagrams/is_changed.pdf}
\caption{Áramkör változásának észlelése}
\label{fig:is_changed}
\end{center}
\end{figure}

\begin{figure}[H]
\begin{center}
\includegraphics{chapters/chapter04/seqdiagrams/new/doEvalCycle.pdf}
\caption{Áramkör kiértékelési ciklus}
\label{fig:circuit_sim}
\end{center}
\end{figure}

\begin{figure}[H]
\begin{center}
\includegraphics{chapters/chapter04/seqdiagrams/new/evaluate.pdf}
\caption{Komponens kiértékelése}
\label{fig:evaluate}
\end{center}
\end{figure}

\begin{figure}[H]
\begin{center}
\includegraphics{chapters/chapter04/seqdiagrams/new/commitFlipFlops.pdf}
\caption{Flipflopok állapotának véglegesítése}
\label{fig:commitFlipFlops}
\end{center}
\end{figure}

\begin{figure}[H]
\begin{center}
\includegraphics{chapters/chapter04/seqdiagrams/new/stepGenerators.pdf}
\caption{Jelgenerátorok léptetése}
\label{fig:step_gens}
\end{center}
\end{figure}

\begin{figure}[H]
\begin{center}
\includegraphics{chapters/chapter04/seqdiagrams/jelforrasok_modositasa.pdf}
\caption{Jelforrások módosítása}
\label{fig:jelforrasok_modositasa}
\end{center}
\end{figure}

\section{State-chartok}

\begin{figure}[H]
\begin{center}
\includegraphics{chapters/chapter04/seqdiagrams/allapotgep.pdf}
\caption{Szimuláció állapotgépe}
\label{fig:allapotgep}
\end{center}
\end{figure}

%\begin{figure}[h]
%\begin{center}
%\includegraphics[width=17cm]{chapters/chapter03/seqdiagrams/sim_states.pdf}
%\caption{Szimuláció állapotai}
%\label{fig:sim_states}
%\end{center}
%\end{figure}

